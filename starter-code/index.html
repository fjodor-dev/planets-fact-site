<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@500&family=League+Spartan:wght@300;700&display=swap" rel="stylesheet">
  <title>Frontend Mentor | Planets fact site</title>
  <link rel="stylesheet" href="style.css">
  <script src="script/jquery-3.6.0.min.js"></script>
  <script>

  $('document').ready(()=>{

  /*////////////////////////////////////////////////////////
  //              global variables declaretion            //
  ////////////////////////////////////////////////////////*/

  
    let planetNum = 4
    let selectedView = 1
    let planetCount = 0

    const biggestBodyKM = 69911 //jupiter, needed for scaling planets
    
    const cssRoot = $(":root")

    const menuIcon = $("header #menu_bar")
    const menuIconBar1 = $("header #menu_bar #bar1")
    const menuIconBar2 = $("header #menu_bar #bar2")
    const menuIconBar3 = $("header #menu_bar #bar3")

    const headerOl = $("header ol")
    const foldOutMenu = $("header #planet_ol").hide()

    const main = $("main")

    const planetSpace = $("main #planet_space")
    const chevron1 = planetSpace.children("#chevron1")
    const planetImage = planetSpace.children("#planet")
    const chevron2 = planetSpace.children("#chevron2")
    const planetToolTip = $("main  #planet_space #planet_surface_tooltip")

    const mainPlanetName = $("main article h1")
    const mainText = $("main article p")
    const source = $("main article h4 a")

    const viewOptions = main.children("#view_options")

  /*////////////////////////////////////////////////////////
  //                   linear program flow                //
  ////////////////////////////////////////////////////////*/

    chevron1.animate({opacity: '0.0'});
    chevron2.animate({opacity: '0.0'});

    viewOptions.children().first().addClass("viewSelected")
    setData();

    $.getJSON("script/data.json", (data)=>{
      //for all planets
      planetCount = data.length
      for (let index = 0; index < planetCount; index++) {
        //fill header list
        headerOl.append('<li id="'+ index +'"><h3>'+ data[index].name +'</h3></li>')
        // fill hamburger menu
        foldOutMenu.append('<div class="planet_li" id="'+ index +'"><img src="'+ data[index].images.planet + '" class="planet_icon"><h3>'+ data[index].name +'</h3><img class="chevron" src="assets/icon-chevron.svg" alt="chevron"></div>')
        foldOutMenu.children(".planet_li").last().children(".planet_icon").css( "background-image", 'url("'+ data[index].images.planet + '")')
      }
    })

  /*////////////////////////////////////////////////////////
  //                       event handlers                 //
  ////////////////////////////////////////////////////////*/
  
    menuIcon.on("click",()=>{
      main.fadeToggle(100)
      foldOutMenu.finish().slideToggle(300)
    })
   
    foldOutMenu.on("click",".planet_li",function(){
      planetNum = parseInt($(this).attr("id"))
      main.fadeToggle(100)
      foldOutMenu.finish().slideToggle(200)
      setData()
    })

    headerOl.on("click","li",function(){
      let prePlanet = planetNum
      planetNum = parseInt($(this).attr("id"))
      if(prePlanet < planetNum){
        swipePlanet(true)
      }
      else if(prePlanet > planetNum){
        swipePlanet(false)
      }else{
        setData()
      }
    })

    viewOptions.on("click","h3",function(){
      viewOptions.children("h3").removeClass("viewSelected")
      $(this).addClass("viewSelected")
      selectedView = parseInt($(this).attr("id"))

      setData();
    })

    planetSpace.on("mousemove",()=>{
      if(planetNum > 0){
        chevron1.finish().animate({opacity: '0.7'},600);
      }else{
        chevron1.animate({opacity: '0.0'},600);
      }
      if(planetNum < planetCount-1){
        chevron2.finish().animate({opacity: '0.7'},300);
      }else{
        chevron2.animate({opacity: '0.0'},300);
      }
    }).on("mouseleave",()=>{
      chevron1.finish().animate({opacity: '0'},300);
      chevron2.finish().animate({opacity: '0'},300);
    }).on("swiperight", ()=>{
      console.log("swipeR")
    }).on("swipeleft", ()=>{
      console.log("swipeL")
    })

    chevron1.on("click",()=>{
      if(planetNum > 0 ){
        planetNum--
        swipePlanet(false)
        return
      }
    })
    
    chevron2.on("click",()=>{
      if(planetNum < planetCount-1){
        planetNum++
        swipePlanet(true)
        return
      }
    })

    

  /*////////////////////////////////////////////////////////
  //                   costum functions                   //
  ////////////////////////////////////////////////////////*/

    function swipePlanet(plus) {

      
      $(".swipingPlanet").remove()

      planetImageClone = planetImage.clone()
      
      
      planetImage.css("opacity", "0")

      // console.log(planetImage.css())

      planetImageClone.css({
        "position": "absolute",
        "width": planetImage.width() + "px",
        "height": planetImage.height() + "px",
      }).addClass("swipingPlanet")

      setData()

      planetSpace.append(planetImageClone)


      if(plus){
        planetImageClone.animate({left: (0-planetImageClone.width())},300,()=>{
          // setData() 
          planetImageClone
          .css({
            "height": planetImage.height() + "px",
            "width": planetImage.width() + "px",
            "left": 100 + "%"
          })
          .attr("src", "" + planetImage.attr("src"))
          .animate({left: planetImage.offset().left},300,()=>{
            planetImage.css("opacity", "1")
            $(".swipingPlanet").remove()
          })
        })
      }else{
        planetImageClone.animate({left: "100%"},300,()=>{
          // setData()
          planetImageClone
          .css({
            "height": planetImage.height() + "px",
            "width": planetImage.width() + "px",
            "left": (0-planetImage.width()) + "px"
          })
          .attr("src", "" + planetImage.attr("src"))
          .animate({left: planetImage.offset().left},300,()=>{
            planetImage.css("opacity", "1")
            $(".swipingPlanet").remove()
          })
        })
      }
      
    }

    function setData(){
      $.getJSON("script/data.json", (data)=>{

        cssRoot.css("--selectedColor", data[planetNum].color)

        foldOutMenu.children(".planet_li").css("border-color", "var(--colorborder)")
        foldOutMenu.children(".planet_li:nth-child("+ (planetNum + 1) +")").css("border-color", "var(--selectedColor)")

        headerOl.children("li").css("border-color", "transparent")
        headerOl.children("li:nth-child("+ (planetNum + 1) +")").css("border-color", "var(--selectedColor)")

        mainPlanetName.text(data[planetNum].name)

        planetToolTip.hide()
        
        switch (selectedView) {
          case 1:{
            mainText.text(data[planetNum].overview.content)
            source.attr("href", data[planetNum].overview.source)
            planetImage.attr("src", data[planetNum].images.planet)
          }break;

          case 2:{
            mainText.text(data[planetNum].structure.content)
            source.attr("href", data[planetNum].structure.source)
            planetImage.attr("src", data[planetNum].images.internal)
          }break;

          case 3:{
            mainText.text(data[planetNum].geology.content)
            source.attr("href", data[planetNum].geology.source)
            planetImage.attr("src", data[planetNum].images.planet)
            planetToolTip.attr("src", data[planetNum].images.geology).show()
          }break;
        }

        if (true) {//make later widt setting
          const procent = 90 * (data[planetNum].radius/biggestBodyKM)
          planetImage.height(procent + "%")
          planetImage.width(procent + "%")

          if(planetNum == 5){//saturn sizing
            planetImage.height((planetImage.height()/100)*137,72455)
            planetImage.width(planetImage.height())
          }
        }

      })
    }





  })
  </script>
</head>
<body>

  <header>
    <h2>the planets</h2>
    <div id="menu_bar" onclick="">
      <div id="bar1" class="bar"></div>
      <div id="bar2" class="bar"></div>
      <div id="bar3" class="bar"></div>
    </div>

    <ol>
      <!-- <li><h3>planet</h3></li> -->
    </ol>

    <menu id="planet_ol">
      <!-- <div class="planet_li">
        <div class="planet_icon"></div>
        <h3>planet</h3>
        <img class="chevron" src="assets/icon-chevron.svg" alt="chevron">
      </div> -->
    </menu>
    <hr>
    
  </header>

  <main>
    
    <hr>
    <section id="planet_space">
      <img id="chevron1" src="assets/icon-chevron.svg" alt="chevron">
      <img id="planet" src="assets/planet-jupiter-internal.svg" alt="planet_image">
      <img id="chevron2" src="assets/icon-chevron.svg" alt="chevron">
      <img id="planet_surface_tooltip" src="assets/geology-neptune.png" alt="">
    </section>
    <article>
      <h1>planet name</h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae numquam et commodi, adipisci quae esse iste architecto atque odio quaerat. Voluptatum dolor deleniti a quis eos ea placeat voluptatibus quasi amet et officia, iure asperiores atque? Ullam ipsam laudantium enim?
      </p>
      <h4>
        Source : <a href="https://en.wikipedia.org/wiki/Rickrolling">Wikipedia</a><img src="assets/icon-source.svg" alt="">
      </h4>
      
    </article>
    <nav id="view_options">
      <h3 id="1"><span>01</span>Overview</h3>
      <h3 id="2"><span>02</span>Structure</h3>
      <h3 id="3"><span>03</span>surface</h3>
    </nav>

    

    <section class="facts">
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
      <div>
        <h4>field name</h4>
        <h2>data value</h2>
      </div>
    </section>
  </main>
  <footer>

  </footer>
</body>
</html>